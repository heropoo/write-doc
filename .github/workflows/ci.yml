name: Build

on: [push]

jobs:
  build:
    runs-on: ${{ matrix.operating-system }}
      strategy:
        matrix:
          operating-system: [ubuntu-latest, windows-latest, macOS-latest]
          php-versions: ['5.6', '7.0', '7.1', '7.2', '7.3', '7.4']
      name: PHP ${{ matrix.php-versions }} Build on ${{ matrix.operating-system }}
    steps:
    - name: Checkout
      uses: actions/checkout@v1

    - name: Setup PHP
        uses: shivammathur/setup-php@v1
        with:
          php-version: ${{ matrix.php-versions }}

    - name: Install Dependencies
      run: composer install --prefer-dist
   
    - name: Build and Deploy
      uses: JamesIves/github-pages-deploy-action@master
      env:
        ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}
        BASE_BRANCH: master # The branch the action should deploy from.
        BRANCH: gh-pages # The branch the action should deploy to.
        FOLDER: dist # The folder the action should deploy.
        BUILD_SCRIPT: php builder.php demo
